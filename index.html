<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>GK Gaming - Auto Balance Transfer</title>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<style>
:root {
  --neon-green: #39ff14;
  --gold-orange: #ff8c00;
  --pure-white: #ffffff;
  --logout-red: #ff3333;
  --border-wood: #4a2c1d;
  --modal-bg: rgba(0, 0, 0, 0.98);
}

* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Arial Black', Gadget, sans-serif; }

/* --- LANDSCAPE LOCK --- */
body, html { width: 100%; height: 100%; background-color: #000; overflow: hidden; }

@media screen and (orientation: portrait) {
  #portraitWarning { display: flex !important; }
}

#portraitWarning {
  display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
  background: #000; color: var(--gold-orange); z-index: 999999;
  justify-content: center; align-items: center; text-align: center;
  font-size: 5vw; padding: 20px;
}

/* --- LOGIN SECTION --- */
#loginSection {
  width: 100vw; height: 100vh;
  background-image: url('https://uploads.onecompiler.io/445tyzay6/44a94j6hr/1000061365.jpg');
  background-size: 100% 100%;
  position: fixed; top: 0; left: 0; z-index: 10000; display: flex;
}

.response-header {
  position: absolute; top: 2%; left: 2%; font-size: 1.8vw; font-weight: bold;
  color: var(--gold-orange); text-shadow: 2px 2px #000;
}

.input-area {
  position: absolute; top: 78.5%; left: 30.5%;
  display: flex; flex-direction: column; gap: 1.5vw;
}

.gk-input {
  width: 13vw; height: 3.5vw; background: #fff; border: 2px solid var(--border-wood);
  color: #000; font-weight: bold; font-size: 1.5vw; padding: 0 10px; outline: none;
  /* नया CSS: टेक्स्ट सिलेक्शन और कॉपी को रोकने के लिए */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  cursor: default;
}

/* प्लेसहोल्डर के लिए स्टाइल */
.gk-input::placeholder {
  color: #666;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.btn-enter-visual {
  position: absolute; bottom: 3.5%; left: 60%; width: 14vw; height: 5.5vw;
  cursor: pointer; background: linear-gradient(to bottom, #ff8c00, #8b4513);
  border: 2px solid #ffd700; color: #fff; font-size: 2vw; font-weight: bold;
  border-radius: 10px; display: flex; justify-content: center; align-items: center; text-shadow: 2px 2px #000;
}

/* --- HOME SECTION --- */
#homeSection {
  width: 100vw; height: 100vh;
  background-image: url('https://uploads.onecompiler.io/445tyzay6/44a926ypm/1000061816.jpg');
  background-size: 100% 100%; position: relative; display: none;
}

.top-nav { position: absolute; top: 1.2%; width: 100%; display: flex; padding: 0 3%; font-size: 1.5vw; }
.id-label { color: var(--gold-orange); }
.points-label { color: var(--gold-orange); margin-left: 21%; }
.dynamic-val { color: var(--pure-white); margin-left: 10px; }

.games-title { position: absolute; top: 10.5%; right: 15%; color: var(--neon-green); font-size: 3.2vw; font-weight: 900; }

/* FUN TARGET BUTTON */
.fun-target-gif-container {
  position: absolute; top: 18.5%; right: 12.5%; width: 11vw;
  text-align: center; z-index: 500; cursor: pointer;
}
.gif-button {
  width: 100%; border: 3px solid var(--gold-orange); border-radius: 12px;
  box-shadow: 0 0 15px var(--gold-orange); transition: 0.2s;
}
.gif-button:hover { transform: scale(1.1); box-shadow: 0 0 25px var(--neon-green); }
.gif-label { color: #fff; font-size: 1.3vw; font-weight: bold; margin-top: 5px; text-shadow: 2px 2px #000; }

/* Action Panel */
.child-reg-container { 
  position: absolute; top: 42.5%; left: 53.4%; 
  transform: translateX(-50%); text-align: center; 
  cursor: pointer; z-index: 100;
}
.child-reg-text { color: var(--neon-green); font-size: 2.1vw; font-weight: bold; line-height: 1.1; text-transform: uppercase; }

.panel-action-bar {
  position: absolute; top: 63.2%; width: 100%; display: flex; justify-content: space-between;
  padding: 0 5% 0 3.5%; font-size: 2.45vw;
}
.label-green { color: var(--neon-green); font-style: italic; font-weight: bold; }
.btn-orange { color: var(--gold-orange); cursor: pointer; font-weight: bold; }

.response-msg-home { position: absolute; bottom: 5.5%; left: 20.5%; color: var(--neon-green); font-size: 1.4vw; font-weight: bold; }

/* Footer */
.footer-links {
  position: absolute; bottom: 5.1%; width: 90%; display: flex; justify-content: space-between; padding: 0 3%;
}
.refresh-action { color: var(--neon-green); font-size: 1.5vw; cursor: pointer; font-weight: bold; }
.logout-action { color: var(--logout-red); font-size: 1.5vw; cursor: pointer; font-weight: bold; z-index: 200; }

/* Modal */
#transferModal {
  display: none; position: fixed; z-index: 50000; left: 0; top: 0; width: 100%; height: 100%;
  background-color: var(--modal-bg); justify-content: center; align-items: center;
}
.modal-box {
  background: #120a07; padding: 30px; border: 4px solid var(--gold-orange);
  border-radius: 20px; text-align: center; width: 420px; box-shadow: 0 0 30px #ff8c00;
}
.m-input {
  width: 100%; padding: 12px; margin: 10px 0; background: #fff; border: 2px solid #4a2c1d;
  font-size: 16px; font-weight: bold; border-radius: 8px; color: #000;
  /* नया CSS: ट्रांसफर मोडल के इनपुट के लिए भी */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  cursor: default;
}
.m-btns { display: flex; justify-content: space-between; margin-top: 25px; }
.btn-m-send { background: var(--neon-green); color: #000; padding: 10px 30px; cursor: pointer; border: none; font-weight: bold; border-radius: 8px; }
.btn-m-close { background: var(--logout-red); color: #fff; padding: 10px 30px; cursor: pointer; border: none; font-weight: bold; border-radius: 8px; }
</style>
</head>
<body>

<div id="portraitWarning">PLEASE ROTATE TO LANDSCAPE MODE</div>

<div id="loginSection">
  <div class="response-header">Response :- <span id="statusMsg">Please Now Login</span></div>
  <div class="input-area">
    <input type="text" id="uid" class="gk-input" placeholder="GK ID">
    <input type="password" id="pass" class="gk-input" placeholder="Password">
  </div>
  <button class="btn-enter-visual" onclick="login()">ENTER</button>
</div>

<div id="homeSection">
  <div class="top-nav">
    <div class="id-label">LOGGED ID :- <span id="idVal" class="dynamic-val">---</span></div>
    <div class="points-label">POINTS :- <span id="ptsVal" class="dynamic-val">0</span></div>
  </div>
  <div class="games-title">GAMES</div>

  <div class="fun-target-gif-container" onclick="playGame()">
      <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNHJ1NXZqYnd6bmF6bmZ6bmZ6bmZ6bmZ6bmZ6bmZ6bmZ6bmZ6JmVwPXYxX2ludGVybmFsX2dpZl9ieV9pZCZjdD1n/3o7TKMGpxP5OqP77QA/giphy.gif" alt="Fun Target" class="gif-button">
      <div class="gif-label">FUN TARGET</div>
  </div>

  <div class="child-reg-container" onclick="openTransferModal()">
    <div class="child-reg-text">CHILD<br>REGISTRATION</div>
  </div>

  <div class="panel-action-bar">
    <div class="label-green">Receivables</div>
    <div class="btn-orange">RECEIVE</div><div class="btn-orange">REJECT</div>
    <div class="label-green">Transferables</div><div class="btn-orange">REJECT</div>
  </div>
  <div class="response-msg-home" id="hRes">Response -</div>
  <div class="footer-links">
    <div class="refresh-action" onclick="location.reload()">REFRESH</div>
    <div class="logout-action" onclick="logout()">LOGOUT</div>
  </div>
</div>

<div id="transferModal">
  <div class="modal-box">
    <div class="modal-header" style="color:var(--neon-green); font-size:20px; margin-bottom:15px;">REAL-TIME ID TRANSFER</div>
    <input type="text" id="targetId" class="m-input" placeholder="DESTINATION GK ID">
    <input type="number" id="transferAmt" class="m-input" placeholder="AMOUNT TO SEND">
    <input type="password" id="transferPin" class="m-input" placeholder="ENTER YOUR PIN">
    <div class="m-btns">
      <button class="btn-m-send" onclick="executeRealTransfer()">SUBMIT</button>
      <button class="btn-m-close" onclick="closeTransferModal()">CANCEL</button>
    </div>
  </div>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyA-KabHNxU7PmQ3sARjqY7XrZ7LI5rSI8E",
  databaseURL: "https://funtop-453ec-default-rtdb.firebaseio.com/",
  projectId: "funtop-453ec"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let myId = "";
let myCurrentCoins = 0;

// ============================================
// नया लॉजिक: UID और Password फील्ड्स पर क्लिक करने के बाद कोई ऑप्शन नहीं आने देना
// ============================================
function disableInputOptions() {
  // UID और Password फील्ड्स के लिए
  const uidField = document.getElementById('uid');
  const passField = document.getElementById('pass');
  
  // ट्रांसफर मोडल के फील्ड्स के लिए
  const targetIdField = document.getElementById('targetId');
  const transferAmtField = document.getElementById('transferAmt');
  const transferPinField = document.getElementById('transferPin');
  
  // सभी इनपुट फील्ड्स की लिस्ट
  const allSecureInputs = [uidField, passField, targetIdField, transferAmtField, transferPinField];
  
  // प्रत्येक इनपुट फील्ड पर इवेंट लिसनर्स जोड़ें
  allSecureInputs.forEach(input => {
    if (!input) return;
    
    // राइट-क्लिक मेनू को डिसेबल करें
    input.addEventListener('contextmenu', function(e) {
      e.preventDefault();
      return false;
    });
    
    // कॉपी (Ctrl+C) को रोकें
    input.addEventListener('copy', function(e) {
      e.preventDefault();
      return false;
    });
    
    // कट (Ctrl+X) को रोकें
    input.addEventListener('cut', function(e) {
      e.preventDefault();
      return false;
    });
    
    // पेस्ट (Ctrl+V) को रोकें
    input.addEventListener('paste', function(e) {
      e.preventDefault();
      return false;
    });
    
    // टेक्स्ट सिलेक्शन को रोकें
    input.addEventListener('selectstart', function(e) {
      e.preventDefault();
      return false;
    });
    
    // ड्रैग को रोकें
    input.addEventListener('dragstart', function(e) {
      e.preventDefault();
      return false;
    });
    
    // ड्रॉप को रोकें
    input.addEventListener('drop', function(e) {
      e.preventDefault();
      return false;
    });
  });
}

// ============================================
// BALANCE AUTO TRANSFER TO URL LOGIC
// ============================================
async function playGame() {
    // URL par click karte hi latest balance fetch karke transfer link banayega
    try {
        const snap = await db.ref("users/uid/" + myId).once("value");
        if(snap.exists()){
            const bal = snap.val().coins || 0;
            const targetUrl = `https://narayanbalai100-a11y.github.io/FunTarget-1/?id=${myId}&balance=${bal}`;
            window.open(targetUrl, "_blank");
        }
    } catch(e) {
        window.open("https://narayanbalai100-a11y.github.io/FunTarget-1/", "_blank");
    }
}

function openTransferModal() { document.getElementById('transferModal').style.display = 'flex'; }
function closeTransferModal() { document.getElementById('transferModal').style.display = 'none'; }

async function executeRealTransfer() {
  const tId = document.getElementById('targetId').value.trim();
  const amt = parseFloat(document.getElementById('transferAmt').value);
  const pinInput = document.getElementById('transferPin').value;
  const res = document.getElementById('hRes');
  if(!tId || isNaN(amt) || amt <= 0 || !pinInput) { alert("Details bharen!"); return; }
  if(amt > myCurrentCoins) { alert("Balance kam hai!"); return; }
  try {
    const mySnap = await db.ref("users/uid/" + myId).once("value");
    if(mySnap.exists() && mySnap.val().PIN == pinInput) {
      const targetSnap = await db.ref("users/uid/" + tId).once("value");
      if(targetSnap.exists() && targetSnap.val().PIN) {
        const sBal = myCurrentCoins - amt;
        const rBal = (targetSnap.val().coins || 0) + amt;
        await db.ref("users/uid/" + myId).update({ coins: sBal });
        await db.ref("users/uid/" + tId).update({ coins: rBal });
        res.textContent = "Response - Success: Sent " + amt + " to " + tId;
        alert("Transfer Successful!");
        closeTransferModal();
      } else { alert("Target ID error!"); }
    } else { alert("Ghalat PIN!"); }
  } catch(e) { alert("Error!"); }
}

function startPointsListener(uid) {
  db.ref("users/uid/" + uid).on("value", (snap) => {
    if (snap.exists()) {
      myCurrentCoins = parseFloat(snap.val().coins || 0);
      document.getElementById('ptsVal').textContent = myCurrentCoins.toFixed(2);
    }
  });
}

function activateHome(user) {
  myId = user.uid;
  document.getElementById('loginSection').style.display = 'none';
  document.getElementById('homeSection').style.display = 'block';
  document.getElementById('idVal').textContent = myId;
  startPointsListener(myId);
}

async function login() {
  const u = document.getElementById('uid').value.trim();
  const p = document.getElementById('pass').value.trim();
  const status = document.getElementById('statusMsg');
  if(!u || !p) return;
  
  status.textContent = "Verify...";
  status.style.color = "var(--neon-green)";

  try {
    const snap = await db.ref("users/uid/" + u).once("value");
    if(snap.exists() && snap.val().password === p && snap.val().isActive === 10) {
      const session = { uid: u };
      sessionStorage.setItem('gk_session', JSON.stringify(session));
      setTimeout(() => { activateHome(session); }, 800);
    } else {
      status.textContent = "Login Fail!";
      status.style.color = "var(--logout-red)";
    }
  } catch(e) { status.textContent = "Error!"; }
}

function logout() { sessionStorage.removeItem('gk_session'); location.reload(); }

window.onload = () => {
  // नया लॉजिक: इनपुट ऑप्शन्स को डिसेबल करें
  disableInputOptions();
  
  const saved = sessionStorage.getItem('gk_session');
  if (saved) activateHome(JSON.parse(saved));
};
</script>
</body>
</html>